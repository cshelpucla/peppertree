<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - PepperTree Townhomes</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-auth.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand">PepperTree Townhomes</a>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html">Home</a></li>
                <li><a href="neighborhood.html">Neighborhood</a></li>
                <li><a href="applications-list.html">Applications</a></li>
                <li><a href="rental-application-form.html">Apply Now</a></li>
                <li><a href="schedule.html">Schedule</a></li>
                <li><a href="contact.html" class="active">Contact</a></li>
                <li><a href="#" id="authNavLink" class="auth-nav-link">Sign In</a></li>
            </ul>
        </div>
    </nav>

    <!-- Compact Contact Section -->
    <section class="contact-section-compact">
        <div class="container">
            <div class="contact-header-compact" id="contactHeader">
                <span class="badge-modern" data-field="badge">Let's Connect</span>
                <h1 data-field="title">Get in Touch with <span class="highlight">PepperTree</span></h1>
                <p data-field="subtitle">We'd love to hear from you! Reach out and let's find your perfect home.</p>
            </div>
            
            <div class="contact-grid-compact">
                <!-- Quick Contact Info -->
                <div class="quick-contact" id="quickContact">
                    <!-- Contact cards will be loaded from JSON -->
                </div>

                <!-- Compact Contact Form -->
                <div class="form-container-compact">
                    <div class="form-header-modern" id="formHeader">
                        <h3 data-field="header">âœ¨ Send Us a Message</h3>
                        <p data-field="subtitle">Fill out the form and we'll respond within 24 hours</p>
                    </div>
                    <form class="contact-form-compact" id="contactForm">
                        <div class="form-row-compact">
                            <input type="text" id="firstName" name="firstName" data-field="firstName" placeholder="First Name *" required>
                            <input type="text" id="lastName" name="lastName" data-field="lastName" placeholder="Last Name *" required>
                        </div>
                        
                        <div class="form-row-compact">
                            <input type="email" id="email" name="email" data-field="email" placeholder="Email *" required>
                            <input type="tel" id="phone" name="phone" data-field="phone" placeholder="Phone">
                        </div>

                        <select id="inquiryType" name="inquiryType" data-field="inquiryType" required>
                            <option value="">I'm interested in... *</option>
                            <!-- Options will be loaded from JSON -->
                        </select>

                        <textarea id="message" name="message" data-field="message" rows="3" required placeholder="Your message..."></textarea>

                        <button type="submit" class="btn btn-primary btn-block" data-field="submitButton">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>PepperTree Townhomes</h4>
                    <p>Your perfect home awaits in our beautiful community.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="neighborhood.html">Neighborhood</a></li>
                        <li><a href="available.html">Available Now</a></li>
                        <li><a href="applications-list.html">Applications</a></li>
                        <li><a href="rental-application-form.html">Apply Now</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect With Us</h4>
                    <div class="social-links">
                        <a href="#" class="social-link">Facebook</a>
                        <a href="#" class="social-link">Instagram</a>
                        <a href="#" class="social-link">Twitter</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 PepperTree Townhomes. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Use</a>
                    <a href="#">Accessibility</a>
                </div>
                <div class="equal-housing">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23fff' width='100' height='100'/%3E%3Cpath fill='%23000' d='M50 20L20 45h10v30h15V60h10v15h15V45h10L50 20z'/%3E%3C/svg%3E" alt="Equal Housing Opportunity" style="width: 30px; height: 30px;">
                    <span>Equal Housing Opportunity</span>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Format phone number as user types
        function formatPhoneNumber(value) {
            const digits = value.replace(/\D/g, '');
            
            if (digits.length <= 3) {
                return digits;
            } else if (digits.length <= 6) {
                return `(${digits.substring(0, 3)}) ${digits.substring(3)}`;
            } else {
                return `(${digits.substring(0, 3)}) ${digits.substring(3, 6)}-${digits.substring(6, 10)}`;
            }
        }
        
        const phoneInput = document.getElementById('phone');
        if (phoneInput) {
            phoneInput.addEventListener('input', function(e) {
                const cursorPosition = this.selectionStart;
                const oldLength = this.value.length;
                
                this.value = formatPhoneNumber(this.value);
                
                const newLength = this.value.length;
                const diff = newLength - oldLength;
                
                if (diff > 0) {
                    this.selectionStart = this.selectionEnd = cursorPosition + diff;
                } else {
                    this.selectionStart = this.selectionEnd = cursorPosition;
                }
            });
        }
    </script>

    <!-- Admin Menu -->
    <div id="adminMenu">
        <button onclick="openUserManagement()">ðŸ‘¥ Manage Users</button>
        <button onclick="handleLogout()">ðŸšª Logout</button>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Admin Login</h2>
                <button class="modal-close" onclick="closeLoginModal()">Ã—</button>
            </div>
            <form onsubmit="handleLogin(event)">
                <div class="error-message" id="loginError"></div>
                <div class="form-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeLoginModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Sign In</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Management Modal -->
    <div id="userManagementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>User Management</h2>
                <button class="modal-close" onclick="closeUserManagement()">Ã—</button>
            </div>
            <div class="user-management-header">
                <div>
                    <p style="color: #666; margin: 0;">Manage administrator accounts</p>
                </div>
                <button class="btn-add-user" onclick="openAddUserModal()">âž• Add User</button>
            </div>
            <table class="users-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Created</th>
                        <th>Last Login</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <!-- Users will be loaded here -->
                </tbody>
            </table>
            <div class="modal-actions" style="margin-top: 25px;">
                <button class="btn btn-secondary" onclick="closeUserManagement()">Close</button>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New User</h2>
                <button class="modal-close" onclick="closeAddUserModal()">Ã—</button>
            </div>
            <form id="addUserForm" onsubmit="handleAddUser(event)">
                <div class="error-message" id="addUserError"></div>
                <div class="form-group">
                    <label for="newUsername">Username *</label>
                    <input type="text" id="newUsername" required minlength="3">
                </div>
                <div class="form-group">
                    <label for="newEmail">Email *</label>
                    <input type="email" id="newEmail" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">Password *</label>
                    <input type="password" id="newPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label for="newRole">Role *</label>
                    <select id="newRole" required>
                        <option value="administrator">Administrator</option>
                        <option value="user">User</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddUserModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Load contact data from JSON
        async function loadContactData() {
            try {
                const response = await fetch('contact.json');
                if (!response.ok) {
                    throw new Error('Failed to load contact data');
                }
                const data = await response.json();
                
                // Populate page header
                const badge = document.querySelector('[data-field="badge"]');
                const title = document.querySelector('[data-field="title"]');
                const subtitle = document.querySelector('[data-field="subtitle"]');
                
                if (badge) badge.textContent = data.pageHeader.badge;
                if (title) title.innerHTML = data.pageHeader.title;
                if (subtitle) subtitle.textContent = data.pageHeader.subtitle;
                
                // Generate quick contact cards
                const quickContact = document.getElementById('quickContact');
                
                // Address card
                const addressCard = `
                    <div class="quick-contact-card">
                        <div class="contact-icon">${data.contactInfo.address.icon}</div>
                        <div>
                            <h3>${data.contactInfo.address.title}</h3>
                            <p>${data.contactInfo.address.line1}<br>${data.contactInfo.address.line2}</p>
                            <a href="${data.contactInfo.address.googleMapsUrl}" target="_blank" class="contact-link">
                                ${data.contactInfo.address.buttonText}
                            </a>
                        </div>
                    </div>
                `;
                
                // Phone card
                const phoneCard = `
                    <div class="quick-contact-card">
                        <div class="contact-icon">${data.contactInfo.phone.icon}</div>
                        <div>
                            <h3>${data.contactInfo.phone.title}</h3>
                            <p><a href="${data.contactInfo.phone.phoneLink}" class="contact-link">${data.contactInfo.phone.number}</a></p>
                            <p class="hours">${data.contactInfo.phone.hours}</p>
                        </div>
                    </div>
                `;
                
                // Email card
                const emailCard = `
                    <div class="quick-contact-card">
                        <div class="contact-icon">${data.contactInfo.email.icon}</div>
                        <div>
                            <h3>${data.contactInfo.email.title}</h3>
                            <p><a href="${data.contactInfo.email.emailLink}" class="contact-link">${data.contactInfo.email.address}</a></p>
                            <p class="response-time">${data.contactInfo.email.responseTime}</p>
                        </div>
                    </div>
                `;
                
                quickContact.innerHTML = addressCard + phoneCard + emailCard;
                
                // Populate form header
                const formHeader = document.querySelector('[data-field="header"]');
                const formSubtitle = document.querySelector('[data-field="subtitle"]');
                if (formHeader) formHeader.textContent = data.contactForm.header;
                if (formSubtitle) formSubtitle.textContent = data.contactForm.subtitle;
                
                // Populate form field placeholders
                const fields = data.contactForm.fields;
                Object.keys(fields).forEach(fieldName => {
                    const field = fields[fieldName];
                    const input = document.querySelector(`[data-field="${fieldName}"]`);
                    if (input && field.placeholder) {
                        input.placeholder = field.placeholder;
                    }
                });
                
                // Populate inquiry type options
                const inquirySelect = document.querySelector('[data-field="inquiryType"]');
                if (inquirySelect && fields.inquiryType.options) {
                    const defaultOption = `<option value="">${fields.inquiryType.label}</option>`;
                    const options = fields.inquiryType.options.map(option => 
                        `<option value="${option.value}">${option.label}</option>`
                    ).join('');
                    inquirySelect.innerHTML = defaultOption + options;
                }
                
                // Set submit button text
                const submitBtn = document.querySelector('[data-field="submitButton"]');
                if (submitBtn) {
                    submitBtn.textContent = data.contactForm.submitButton;
                }
                
            } catch (error) {
                console.error('Error loading contact data:', error);
                // Fallback to showing default/existing content if JSON fails to load
            }
        }
        
        // Load contact data when page loads
        document.addEventListener('DOMContentLoaded', loadContactData);
    </script>

    <script src="admin-auth.js"></script>
</body>
</html>
